<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Cart | Spike It Sports</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/spiikeit fitness/style.css">

  <style>
    body {
      background: #f9f9f9;
      font-family: 'Poppins', sans-serif;
    }
    .navbar {
      background-color: #111;
    }
    .navbar-brand {
      font-weight: 700;
      color: #fff !important;
    }
    .cart-count {
      background: #dc3545;
      color: #fff;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      position: absolute;
      top: -6px;
      right: -8px;
    }
    .table img {
      border: 1px solid #ddd;
    }
    .btn {
      border-radius: 25px;
    }
    .qty-btn {
      width: 30px;
      height: 30px;
      border: none;
      border-radius: 50%;
      background: #111;
      color: #fff;
      font-size: 16px;
      font-weight: bold;
      line-height: 30px;
    }
    .qty-input {
      width: 50px;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
   <!-- Top Offers Bar -->
    <div class="offers-bar">
        <span class="offer-text">
            ðŸ”¥ Offers | 30% Off! On Minimum Purchase of â‚¹5000 | 15% Off! On Minimum Purchase of â‚¹2500
        </span>
    </div>

   <nav class="navbar navbar-expand-lg fixed-top navbar-dark custom-navbar py-3">
    <div class="container">
      <a class="navbar-brand fs-3" href="#">SPIKEIT</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul style="margin-top: 30px;" class="navbar-nav me-3">
          <li class="nav-item"><a class="nav-link active" href="/spiikeit fitness/index.html">Home</a></li>
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarSportsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Shop by Sports
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarSportsDropdown">
               <li><a class="dropdown-item" href="/spiikeit fitness/categories/football.html">Football</a></li>
              <li><a class="dropdown-item" href="/spiikeit fitness/categories/basketball.html">Basketball</a></li>
              <li><a class="dropdown-item" href="/spiikeit fitness/categories/cricket.html">Cricket</a></li>
              <li><a class="dropdown-item" href="/spiikeit fitness/categories/volleyball.html">Badminton</a></li>
                <li><hr class="dropdown-divider"></li>

            </ul>
          </li>
         <li class="nav-item"><a class="nav-link" href="/spiikeit fitness/new-arrival.html">New Arrivals</a></li>
          <li class="nav-item"><a class="nav-link" href="/spiikeit fitness/accessories.html">Accessories</a></li>
          <li class="nav-item"><a class="nav-link" href="/spiikeit fitness/appearels.html">Apparels</a></li>
          <li class="nav-item"><a class="nav-link" href="/spiikeit fitness/about-us.html">About us</a></li>

        </ul>

        <form class="d-flex me-3">
          <input class="form-control form-control-sm" type="search" placeholder="Search products">
        </form>

        <div class="d-flex align-items-center">
          <a href="login.html" class="text-white me-3"><i class="bi bi-person"></i></a>
          <div class="navbar-utility-right ms-auto d-flex align-items-center gap-3 position-relative">
  <!-- Wishlist Icon -->
  <a href="wishlist.html" class="text-white position-relative">
    <i class="fa-regular fa-heart fa-lg"></i>
    <span class="wishlist-count bg-danger text-white rounded-circle position-absolute" 
          style="font-size: 12px; top: -8px; right: -10px; padding: 2px 6px;">0</span>
  </a>

  <!-- Cart Icon -->
  <a href="cart.html" class="text-white position-relative">
    <i class="fa-solid fa-cart-shopping fa-lg"></i>
    <span class="cart-count bg-danger text-white rounded-circle position-absolute" 
          style="font-size: 12px; top: -8px; right: -10px; padding: 2px 6px;">0</span>
  </a>
</div>

        
        </div>
      </div>
    </div>
  </nav>

  <!-- Cart Section -->
  <section class="container my-5">
    <h2 class="fw-bold mb-4">ðŸ›’ Your Shopping Cart</h2>
    <div id="cartContainer"></div>
  </section>

  <section class="container my-5 text-center">
  <div class="p-5 bg-white rounded shadow">
    <h2 class="fw-bold mb-3">Payment Summary</h2>
    <p class="fs-5">Total Amount: <span id="totalAmount">â‚¹0</span></p>
    <button id="payNowBtn" class="btn btn-success px-4 mt-3">Pay Now</button>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const summary = JSON.parse(localStorage.getItem("orderSummary")) || { totalAmount: 0 };
    document.getElementById("totalAmount").textContent = "â‚¹" + summary.totalAmount;

    document.getElementById("payNowBtn").addEventListener("click", () => {
      alert("Payment Successful! ðŸŽ‰\nThanks for shopping with Spike It Sports!");
      localStorage.removeItem("cart");
      localStorage.removeItem("orderSummary");
      window.location.href = "index.html";
    });
  });
</script>

  <!-- Footer -->
 <section
        class="hero-banner position-relative text-center text-white d-flex align-items-center justify-content-center">

        <div class="hero-bg-image"></div>

        <div class="container position-relative z-1 py-5">

            <h1 class="hero-brand-logo mb-5">SPIKE IT</h1>

            <h2 class="display-4 fw-bold mb-4" style="font-size: 20px;">MOVE UP BY SIGNING UP</h2>

            <form class="subscription-form mx-auto" style="max-width: 450px;">

                <div class="input-group mb-3 form-fields">
                    <input type="email" class="form-control py-3" placeholder="Enter your email..."
                        aria-label="Enter your email" required>
                    <button class="btn btn-light btn-lg px-4" type="submit">Submit</button>
                </div>

                <div class="submission-success-message text-center" style="display: none;">
                    <h4 class="text-white fw-light">Thank You for Moving Up!</h4>
                    <p class="text-light">Your email has been successfully subscribed.</p>
                </div>
            </form>
        </div>
    </section>



    <!-- footer -->
    <footer class="bg-dark text-white pt-4">

        <div class="container-fluid bg-dark text-center border-bottom border-secondary py-3">
            <div class="row">
                <div class="col-md-4 mb-2 mb-md-0 d-flex align-items-center justify-content-center">
                    <i class="bi bi-truck me-2"></i> Free shipping on orders above Rs. 999
                </div>
                <div
                    class="col-md-4 mb-2 mb-md-0 d-flex align-items-center justify-content-center border-start border-end border-secondary">
                    <i class="bi bi-wallet me-2"></i> Cash On Delivery
                </div>
                <div class="col-md-4 d-flex align-items-center justify-content-center">
                    <i class="bi bi-arrow-return-left me-2"></i> Return policy (Upto 7 days)
                </div>
            </div>
        </div>

        <div class="container-fluid py-5 footer-main-content position-relative">

            <div class="footer-bg-image"></div>

            <div class="container position-relative z-1">
                <div class="row">

                    <div class="col-lg-4 col-md-4 mb-4 mb-lg-0">
                        <h5 class="text-uppercase mb-3">COMPANY</h5>
                        <ul class="list-unstyled">
                            <li><a href="#" class="text-white text-decoration-none">About Us</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Contact Us</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Blogs</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Catalogues</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Compliance</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Terms And Conditions</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Privacy Policy</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Refund Policy</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-4 col-md-4 mb-4 mb-lg-0">
                        <h5 class="text-uppercase mb-3">SPIKEIT</h5>
                        <ul class="list-unstyled">
                            <li><a href="#" class="text-white text-decoration-none">AIFF</a></li>
                            <li><a href="#" class="text-white text-decoration-none">ISL</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Bhutan Football Federation</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Srilankan Football Federation</a>
                            </li>
                            <li><a href="#" class="text-white text-decoration-none">BFI</a></li>
                            <li><a href="#" class="text-white text-decoration-none">VFI</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-4 col-md-4">
                        <h5 class="text-uppercase mb-3">CONNECT WITH US</h5>
                        <p class="mb-1"><i class="bi bi-telephone-fill me-2"></i> +91 7012056376</p>
                        <p class="mb-1"><i class="bi bi-envelope-fill me-2"></i> ahamedansarnasim@gmail.com</p>
                        <p class="mb-1"><i class="bi bi-clock-fill me-2"></i> 9AM - 6PM</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid text-center border-top border-secondary py-3">
            <div class="row d-flex align-items-center justify-content-between">
                <div class="col-md-4 text-start">
                    &copy; 2025 SPIKEIT
                </div>
                <div class="col-md-4 text-center">
                    Design Partners: Intent Global
                </div>
                <div class="col-md-4 text-end social-icons">
                    <a href="#" class="text-white me-3"><i class="bi bi-facebook fs-5"></i></a>
                    <a href="#" class="text-white me-3"><i class="bi bi-instagram fs-5"></i></a>
                    <a href="#" class="text-white me-3"><i class="bi bi-twitter-x fs-5"></i></a>
                    <a href="#" class="text-white"><i class="bi bi-youtube fs-5"></i></a>
                </div>
            </div>
        </div>
    </footer>

  <!-- Cart Script -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const cartContainer = document.getElementById("cartContainer");
      // fallback image if item.image empty or broken
      const FALLBACK_IMAGE = 'https://via.placeholder.com/100x100?text=No+Image';

      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      // âœ… Empty cart message
      if (cart.length === 0) {
        cartContainer.innerHTML = `
          <div class="text-center p-5 border rounded bg-white">
            <h4>Your cart is empty.</h4>
            <a href="index.html" class="btn btn-primary mt-3">Back to Shopping</a>
          </div>`;
        updateCartCount();
        return;
      }

      let total = 0;
      let html = `
        <div class="table-responsive bg-white p-3 rounded shadow-sm">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-dark text-center">
              <tr>
                <th>Image</th>
                <th>Product</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Total</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
      `;

      cart.forEach((item, index) => {
        // ensure price and qty are numbers
        const priceNum = Number(item.price) || 0;
        const qtyNum = Number(item.qty) || 1;
        const itemTotal = priceNum * qtyNum;
        total += itemTotal;

        // prefer valid image, otherwise fallback
        const imgSrc = item.image && item.image !== "" ? item.image : FALLBACK_IMAGE;

        html += `
          <tr class="text-center">
            <td><img src="${imgSrc}" width="70" class="rounded" onerror="this.src='${FALLBACK_IMAGE}'"></td>
            <td>${escapeHtml(item.name)}</td>
            <td>â‚¹${priceNum.toLocaleString()}</td>
            <td>
              <button class="qty-btn decrease" data-index="${index}">-</button>
              <input type="text" class="qty-input" value="${qtyNum}" readonly>
              <button class="qty-btn increase" data-index="${index}">+</button>
            </td>
            <td>â‚¹${itemTotal.toLocaleString()}</td>
            <td>
              <button class="btn btn-sm btn-danger remove-btn" data-index="${index}">
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr>
        `;
      });

      html += `
            </tbody>
            <tfoot class="fw-bold text-center">
              <tr>
                <td colspan="4" class="text-end">Grand Total</td>
                <td colspan="2">â‚¹${total.toLocaleString()}</td>
              </tr>
              <tr>
                <td colspan="3">
                  <a href="index.html" class="btn btn-outline-dark mt-3">â¬… Back to Shopping</a>
                </td>
                <td colspan="3" class="text-end">
                  <button id="paymentBtn" class="btn btn-success mt-3 px-4">Proceed to Payment</button>
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
      `;

      cartContainer.innerHTML = html;

      // Helper to update storage and reload (keeps current logic)
      function saveAndReload(updatedCart) {
        localStorage.setItem("cart", JSON.stringify(updatedCart));
        // update cart variable and reload to refresh UI
        cart = updatedCart;
        location.reload();
      }

      // âœ… Quantity increase
      document.querySelectorAll(".increase").forEach(btnEl => {
        btnEl.addEventListener("click", (e) => {
          // use currentTarget to ensure we get dataset even if inner element clicked
          const index = e.currentTarget.dataset.index;
          if (index == null) return;
          const newCart = JSON.parse(localStorage.getItem("cart")) || [];
          newCart[index].qty = Number(newCart[index].qty || 0) + 1;
          saveAndReload(newCart);
        });
      });

      // âœ… Quantity decrease
      document.querySelectorAll(".decrease").forEach(btnEl => {
        btnEl.addEventListener("click", (e) => {
          const index = e.currentTarget.dataset.index;
          if (index == null) return;
          const newCart = JSON.parse(localStorage.getItem("cart")) || [];
          const currentQty = Number(newCart[index].qty || 0);
          if (currentQty > 1) {
            newCart[index].qty = currentQty - 1;
          } else {
            if (confirm("Remove this item?")) {
              newCart.splice(index, 1);
            } else {
              return; // do nothing if user cancels
            }
          }
          saveAndReload(newCart);
        });
      });

      // âœ… Remove button
      document.querySelectorAll(".remove-btn").forEach(btnEl => {
        btnEl.addEventListener("click", (e) => {
          // currentTarget refers to the button regardless of clicked child
          const index = e.currentTarget.dataset.index;
          if (index == null) return;
          const newCart = JSON.parse(localStorage.getItem("cart")) || [];
          newCart.splice(index, 1);
          localStorage.setItem("cart", JSON.stringify(newCart));
          alert("Item removed from cart!");
          updateCartCount();
          location.reload();
        });
      });

      // âœ… Proceed to payment
      const paymentBtn = document.getElementById("paymentBtn");
      if (paymentBtn) {
        paymentBtn.addEventListener("click", () => {
          const freshCart = JSON.parse(localStorage.getItem("cart")) || [];
          const totalAmount = freshCart.reduce((sum, item) => sum + (Number(item.price) || 0) * (Number(item.qty) || 0), 0);
          const itemCount = freshCart.reduce((sum, item) => sum + (Number(item.qty) || 0), 0);

          localStorage.setItem("orderSummary", JSON.stringify({
            totalAmount,
            itemCount
          }));

          // small delay for UX
          alert("Redirecting to payment page...");
          setTimeout(() => {
            window.location.href = "payment.html";
          }, 600);
        });
      }

      updateCartCount();
    });

    // âœ… Update cart count in navbar
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const totalItems = cart.reduce((sum, item) => sum + (Number(item.qty) || 0), 0);
      const cartCount = document.querySelector(".cart-count");
      if (cartCount) cartCount.textContent = totalItems;
    }

    // small helper to escape product names (prevent accidental HTML injection)
    function escapeHtml(str) {
      if (!str) return '';
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }
  </script>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const orderSummary = JSON.parse(localStorage.getItem("orderSummary"));
    const totalAmount = orderSummary ? orderSummary.totalAmount : 0;
    document.getElementById("totalAmount").textContent = `â‚¹${totalAmount.toLocaleString()}`;

    document.getElementById("payNowBtn").addEventListener("click", () => {
      alert("âœ… Payment Successful! Thank you for shopping with Spike It Sports.");
      localStorage.removeItem("cart");
      window.location.href = "index.html";
    });
  });
</script>

 <script>
    window.addEventListener("scroll", () => {
      const navbar = document.querySelector(".custom-navbar");
      if (window.scrollY > 50) {
        navbar.classList.add("scrolled");
      } else {
        navbar.classList.remove("scrolled");
      }
    });
  </script>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

    <!-- jQuery (must be before your custom JS if they use it) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Custom JS -->
    <script src="/spiikeit fitness/javascript/card2.js"></script>
    <script src="/spiikeit fitness/javascript/email.js"></script>
    <script src="/spiikeit fitness/javascript/new-arrivals.js"></script>
    <script src="javascript/cart.js"></script>


  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
